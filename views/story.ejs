<!DOCTYPE html>
<html lang="en">

<!-- TODO:  this is for showing one and updating one story -->

<head>
  <title>Home Page</title>

  <meta charset="UTF-8" >
  <meta http-equiv="X-UA-Compatible" content="IE=edge" >
  <meta name="viewport" content="width=device-width, initial-scale=1.0" >

  <link rel="stylesheet" href="/vendor/normalize-4.1.1.css" />
  <link rel="stylesheet" href="/vendor/border-box.css" />
  <link
    rel="stylesheet"
    href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css"
    integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS"
    crossorigin="anonymous"
  />
  <link rel="stylesheet" href="/styles/main.css" />
  <link rel="stylesheet" href="/styles/layout.css" />
  <%- include('partials/_userStyleSheet') %>

  <script src="/vendor/jquery-3.0.0.js"></script>
  <script defer src="/scripts/scripst_contributions.js"></script>
</head>

<body>
  <%- include('partials/_header') %>
  <main>
    <article class="story_container">
      <header class="story-header">
        <h1><%= story.title %></h1>
      </header>

      <div class="story_content">
        <p><%= locals.story ? story.content : '' %></p>
      </div>

      <footer class="story_footer">
        <p><%= loginInfo.loggedInUser.username %></p> 
        <p><%= story.upvotes %></p>
        <p><%= story.downvotes %></p>
      </footer >

    </article>
    
    <section id="contributions-container">
      <form method="POST" action="/story">
        <input class="form-control" type="text" name="new-contribution" placeholder="What comes next...?" style="width: 300px; margin: 1em" value=""/>
        <button type="submit" class="btn btn-primary">Submit</button>
      </form>
      
      <article>
        <div>
          <% contributions.forEach(contribution => { %>
          <div><%= contribution.story_step %></div>
          <p><%= contribution.contributer_id %></p>
          <div>
            <%= contribution.content %>
            <%= contribution.created_date %>
            <%= contribution.upvotes %>
            <%= contribution.downvotes %>
          </div>
        <button type="submit" class="edit-contribution">edit</button>
        <button type="submit" class="delete-contribution">delete</button>
          <% }); %>
          </div>
      </article>
    </section>
    
  </main>
  

  

</body>

</html>
